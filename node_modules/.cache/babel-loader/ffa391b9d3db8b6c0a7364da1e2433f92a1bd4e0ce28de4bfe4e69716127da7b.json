{"ast":null,"code":"import _slicedToArray from\"C:/Users/Lenovo/OneDrive/Desktop/dev_proj/food-ordering app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/Lenovo/OneDrive/Desktop/dev_proj/food-ordering app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Lenovo/OneDrive/Desktop/dev_proj/food-ordering app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import CartContext from\"./cart-context\";import{useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];// let updatedItem;\nvar updatedItems;if(existingCartItem){var updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}// const updatedItems=state.items.concat(action.item);\nreturn{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var _existingCartItem=state.items[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-_existingCartItem.price;var _updatedItems;if(_existingCartItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},_existingCartItem),{},{amount:_existingCartItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartItemIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}return defaultCartState;};function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCart=function addItemToCart(item){dispatchCartAction({type:'ADD',item:item});};var removeItemFromCart=function removeItemFromCart(id){dispatchCartAction({type:'REMOVE',id:id});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCart,removeItem:removeItemFromCart};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});}export default CartProvider;","map":{"version":3,"names":["CartContext","useReducer","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","concat","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCart","removeItemFromCart","cartContext","addItem","removeItem","children"],"sources":["C:/Users/Lenovo/OneDrive/Desktop/dev_proj/food-ordering app/src/store/CartProvider.js"],"sourcesContent":["import CartContext from \"./cart-context\";\r\nimport { useReducer } from \"react\";\r\nconst defaultCartState={\r\n    items:[],\r\n    totalAmount:0\r\n}\r\nconst cartReducer=(state,action)=>{\r\n    if(action.type==='ADD'){\r\n        const updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;\r\n\r\n        const existingCartItemIndex=state.items.findIndex(item=>item.id===action.item.id);\r\n        const existingCartItem=state.items[existingCartItemIndex];\r\n        // let updatedItem;\r\n        let updatedItems;\r\n\r\n        if(existingCartItem){\r\n            const updatedItem={\r\n                ...existingCartItem,\r\n                amount:existingCartItem.amount+action.item.amount\r\n            };\r\n            updatedItems=[...state.items];\r\n            updatedItems[existingCartItemIndex]=updatedItem;\r\n        }\r\n        else{\r\n            updatedItems=state.items.concat(action.item);  \r\n        }\r\n\r\n        // const updatedItems=state.items.concat(action.item);\r\n        return {\r\n            items:updatedItems,\r\n            totalAmount:updatedTotalAmount\r\n        }\r\n    }\r\n    if(action.type==='REMOVE'){\r\n        const existingCartItemIndex=state.items.findIndex(item=>item.id===action.id);\r\n        const existingCartItem=state.items[existingCartItemIndex];\r\n        const updatedTotalAmount=state.totalAmount-existingCartItem.price;\r\n        let updatedItems;\r\n        if(existingCartItem.amount===1){\r\n            updatedItems=state.items.filter(item=>item.id!==action.id);\r\n\r\n        }\r\n        else{\r\n            const updatedItem={...existingCartItem,amount:existingCartItem.amount-1};\r\n            updatedItems=[...state.items];\r\n            updatedItems[existingCartItemIndex]=updatedItem;\r\n        }\r\n        return {\r\n            items:updatedItems,\r\n            totalAmount:updatedTotalAmount\r\n        }\r\n    }\r\n    return defaultCartState\r\n}\r\nfunction CartProvider(props){\r\n    const [cartState,dispatchCartAction]=useReducer(cartReducer,defaultCartState);\r\n    const addItemToCart=(item)=>{\r\n        dispatchCartAction({type:'ADD',item:item})\r\n    };\r\n    const removeItemFromCart=(id)=>{\r\n        dispatchCartAction({type:'REMOVE',id:id})\r\n    };\r\n    const cartContext={\r\n        items:cartState.items,\r\n        totalAmount:cartState.totalAmount,\r\n        addItem:addItemToCart,\r\n        removeItem:removeItemFromCart\r\n    }\r\n    return <CartContext.Provider value={cartContext}>\r\n        {props.children}\r\n    </CartContext.Provider>\r\n}\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}